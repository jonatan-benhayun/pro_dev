{% extends "base.html" %}
{% block title %}הרשמה{% endblock %}
{% block content %}
<h1>הרשמה</h1>
<form method="post" action="{{ url_for('auth.register') }}" class="card">
  <label for="username">שם משתמש</label>
  <input id="username" name="username" type="text" required>

  <label for="email">אימייל</label>
  <input id="email" name="email" type="email" required>

<label for="grade">כיתה</label>
<select id="grade" name="grade" required>
  <option value="" disabled
    {{ 'selected' if not (request.form.get('grade') or (user and user.grade)) }}>
    בחר/י כיתה
  </option>

  {# ערך נבחר (אם בעריכת פרופיל / שליחה שנכשלה) #}
  {% set chosen = (request.form.get('grade') or (user.grade if user is defined and user else ''))|int %}

  {# grades = GRADE_CHOICES = [(1,"א׳"), (2,"ב׳"), ...] #}
  {% for val, label in grades %}
    <option value="{{ val }}" {{ 'selected' if val == chosen else '' }}>
      {{ label }}   {# מציג רק אותיות #}
    </option>
  {% endfor %}
</select>


  
  <label for="password">סיסמה</label>
  <div class="password-field">
    <input id="password" name="password" type="password" placeholder="סיסמה" required>
    <button type="button" class="toggle-password" aria-label="הצג/הסתר סיסמה">👁️</button>
  </div>

  <button type="submit">הרשמה</button>
</form>
<p>כבר יש משתמש? <a href="{{ url_for('auth.login') }}">כניסה</a></p>
{% endblock %}
