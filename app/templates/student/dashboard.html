{% extends "base.html" %}
{% block title %}×“×£ ×ª×œ××™×“{% endblock %}

{% block content %}
<div class="container">

  <h2 class="mb-4">×©×œ×•×, {{ current_user.username or "×ª×œ××™×“" }} ğŸ‘‹</h2>

  <div class="grid" style="display:grid; gap:16px; grid-template-columns: repeat(auto-fit,minmax(280px,1fr));">
    <!-- ×›×¨×˜×™×¡: ×¢×¨×™×›×ª ×¤×¨×•×¤×™×œ -->
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">×”×¤×¨×•×¤×™×œ ×©×œ×™</h3>
        <p class="card-text">×¢×“×›×•×Ÿ ×¤×¨×˜×™× ××™×©×™×™×, ×“×•××´×œ, ×›×™×ª×” ×•×¢×•×“.</p>
        <a class="btn btn-primary" href="{{ url_for('main.edit_profile') }}">×¢×¨×™×›×ª ×¤×¨×•×¤×™×œ</a>
      </div>
    </div>

    <!-- ×›×¨×˜×™×¡: ×©×™×¢×•×¨×™× ×§×¨×•×‘×™× -->
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">×”×©×™×¢×•×¨×™× ×”×§×¨×•×‘×™×</h3>
        {% if lessons %}
          <ul class="list">
            {% for l in lessons %}
              <li>
                {{ l.start_at.strftime("%d/%m/%Y %H:%M") }} â€” 
                {{ ((l.end_at - l.start_at).total_seconds() // 60)|int }} ×“×§×³
                {% if l.status %}<span class="badge">{{ l.status }}</span>{% endif %}
              </li>
            {% endfor %}
          </ul>
          <div class="mt-2">
            <a class="btn" href="{{ url_for('main.calendar_view') }}">×œ×œ×•×— ×”×©× ×”</a>
          </div>
        {% else %}
          <p>××™×Ÿ ×©×™×¢×•×¨×™× ×§×¨×•×‘×™× ×¢×“×™×™×Ÿ.</p>
        {% endif %}
      </div>
    </div>

    <!-- ×›×¨×˜×™×¡: ×—×•××¨ ×œ×™××•×“×™ -->

    <div class="card">
      <div class="card-body">
        <h3 class="card-title">×—×•××¨ ×œ×™××•×“×™</h3>
        {% if materials %}
          <ul class="list">
            {% for m in materials %}
              <li>
                <strong>{{ m.title }}</strong>
                <small class="text-muted" style="display:block">{{ m.created_at.strftime('%d/%m/%Y %H:%M') }}</small>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p>×¢×•×“ ×œ× ×”×•×§×¦×• ×—×•××¨×™×. ×›×©×ª×§×‘×œ×•â€”×”×›×œ ×™×•×¤×™×¢ ×›××Ÿ.</p>
        {% endif %}
        <div class="mt-2">
            <a class="btn" href="{{ url_for('student.materials') }}">×œ×¡×¤×¨×™×™×ª ×”×—×•××¨×™×</a>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}
